{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'App',\n  components: {},\n  data() {\n    return {\n      user_for_login: {\n        username: \"\",\n        password: \"\"\n      },\n      page: 1,\n      students: [],\n      dialogVisible: false,\n      dialogVisibleLogin: false,\n      newStudent: {\n        number: \"\",\n        name: \"\",\n        age: \"\",\n        chinese: \"\",\n        math: \"\",\n        english: \"\"\n      }\n    };\n  },\n  methods: {\n    getStudents() {\n      if (sessionStorage.getItem(\"isLogin\") == \"true\") {\n        axios({\n          url: \"http://localhost:8080/students\",\n          method: \"GET\"\n        }).then(res => {\n          console.log(res.data);\n          this.students = res.data;\n        });\n      } else {\n        alert(\"请先登录\");\n      }\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？').then(() => {\n        done();\n      }).catch(() => {});\n    },\n    addStudent() {\n      axios({\n        url: \"http://localhost:8080/add\",\n        method: \"POST\",\n        data: this.newStudent\n      });\n      this.dialogVisible = false;\n    },\n    nextPage() {\n      this.page += 1;\n    },\n    lastPage() {\n      this.page -= 1;\n    },\n    login() {\n      axios({\n        url: \"http://localhost:8080/login\",\n        data: this.user_for_login,\n        method: \"POST\"\n      }).then(res => {\n        console.log(res.data);\n        if (res.data == \"1\") {\n          sessionStorage.setItem(\"isLogin\", \"true\");\n          //sessionStorage.clear();//删除保存的登录信息，注销登录\n        } else {\n          alert(\"用户名或密码不正确\");\n        }\n      });\n      this.dialogVisibleLogin = false;\n    }\n  },\n  computed: {\n    students_for_page() {\n      return this.students.slice(this.page * 10 - 10, this.page * 10);\n    }\n  }\n};","map":{"version":3,"mappings":"AA6DA;AAEA;EACAA;EACAC,aACA;EACAC;IACA;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAX;QACAY;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;QACAC;UACAC;UACAC;QACA;UACAC;UACA;QACA;MACA;QACAC;MACA;IACA;IAEAC;MACA,uBACAC;QACAC;MACA,GACAC;IACA;IAEAC;MACAT;QACAC;QACAC;QACAlB;MACA;MACA;IACA;IAEA0B;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACAZ;QACAC;QACAjB;QACAkB;MACA;QACAC;QACA;UACAU;UACA;QACA;UACAT;QACA;MACA;MACA;IACA;EACA;EACAU;IACAC;MACA;IACA;EACA;AACA","names":["name","components","data","user_for_login","username","password","page","students","dialogVisible","dialogVisibleLogin","newStudent","number","age","chinese","math","english","methods","getStudents","axios","url","method","console","alert","handleClose","then","done","catch","addStudent","nextPage","lastPage","login","sessionStorage","computed","students_for_page"],"sourceRoot":"src","sources":["App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <route-link to=\"/\">首页</route-link>\n    <router-view/>\n    <!--<div class=\"col-8 offset-2\">\n      <table class=\"table caption-top table-hover\">\n        <caption class=\"text-center\">\n          <div>学生管理系统</div>\n          <el-button type=\"primary\" @click = \"getStudents\">刷新列表</el-button>\n          <el-button type=\"warning\" @click=\"dialogVisible = true\">添加学生信息</el-button>\n          <el-dialog title=\"提示\" :visible.sync=\"dialogVisible\" width=\"30%\" :before-close=\"handleClose\">\n            <div>请输入学生信息</div>\n            <br><span>学 号 </span><input v-model.number=\"newStudent.number\"/>\n            <br><span>姓 名 </span><input v-model=\"newStudent.name\"/>\n            <br><span>年 龄 </span><input v-model.number=\"newStudent.age\"/>\n            <br><span>语 文 </span><input v-model.number=\"newStudent.chinese\"/>\n            <br><span>数 学 </span><input v-model.number=\"newStudent.math\"/>\n            <br><span>英 语 </span><input v-model.number=\"newStudent.english\"/>\n            <span slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"dialogVisible = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"addStudent\">确 定</el-button>\n            </span>\n          </el-dialog>\n          <el-button @click=\"dialogVisibleLogin = true\" >用户登录</el-button>\n          <el-dialog title=\"提示\" :visible.sync=\"dialogVisibleLogin\" width=\"30%\" :before-close=\"handleClose\">\n            <div>登 录</div>\n            <br><span class=\"text-center\">账 号</span><input type=\"text\" v-model=\"user_for_login.username\"/>\n            <br><span class=\"text-center\">密 码</span><input type=\"password\" v-model=\"user_for_login.password\"/>\n            <span slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"dialogVisibleLogin = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"login\">确 定</el-button>\n            </span>\n          </el-dialog>\n        </caption>\n        <thead>\n        <tr>\n          <th scope=\"col\">学号</th>\n          <th scope=\"col\">姓名</th>\n          <th scope=\"col\">年龄</th>\n          <th scope=\"col\">语文成绩</th>\n          <th scope=\"col\">数学成绩</th>\n          <th scope=\"col\">英语成绩</th>\n          <th scope=\"col\">操作</th>\n        </tr>\n        <th></th>\n        </thead>\n        <tbody>\n        <Student v-for=\"stu in students_for_page\" :key=\"stu.id\" :student = \"stu\"></Student>\n        </tbody>\n      </table>\n      <div class=\"text-center\">\n        <el-button-group>\n          <el-button type=\"primary\" icon=\"el-icon-arrow-left\" @click=\"lastPage\">上一页</el-button>\n          <el-button type=\"primary\" @click=\"nextPage\">下一页<i class=\"el-icon-arrow-right el-icon--right\"></i></el-button>\n        </el-button-group>\n      </div>\n    </div>-->\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  name: 'App',\n  components: {\n  },\n  data(){\n    return{\n      user_for_login:{\n        username:\"\",\n        password:\"\",\n      },\n      page:1,\n      students:[],\n      dialogVisible: false,\n      dialogVisibleLogin: false,\n      newStudent:{\n        number:\"\",\n        name:\"\",\n        age:\"\",\n        chinese:\"\",\n        math:\"\",\n        english:\"\"\n      }\n    }\n  },\n  methods:{\n    getStudents(){\n      if (sessionStorage.getItem(\"isLogin\") == \"true\"){\n        axios({\n          url:\"http://localhost:8080/students\",\n          method:\"GET\",\n        }).then(res=>{\n          console.log(res.data);\n          this.students = res.data;\n        })\n      }else {\n       alert(\"请先登录\");\n      }\n    },\n\n    handleClose(done) {\n      this.$confirm('确认关闭？')\n          .then(() => {\n            done();\n          })\n          .catch(() => {});\n    },\n\n    addStudent(){\n      axios({\n        url:\"http://localhost:8080/add\",\n        method:\"POST\",\n        data:this.newStudent,\n      })\n      this.dialogVisible = false;\n    },\n\n    nextPage(){\n      this.page += 1;\n    },\n\n    lastPage(){\n      this.page -= 1;\n    },\n\n    login(){\n      axios({\n        url:\"http://localhost:8080/login\",\n        data:this.user_for_login,\n        method:\"POST\",\n      }).then(res =>{\n        console.log(res.data);\n        if (res.data == \"1\"){\n          sessionStorage.setItem(\"isLogin\",\"true\");\n          //sessionStorage.clear();//删除保存的登录信息，注销登录\n        }else{\n          alert(\"用户名或密码不正确\");\n        }\n      })\n      this.dialogVisibleLogin = false;\n    }\n  },\n  computed:{\n    students_for_page(){\n      return this.students.slice(this.page*10-10,this.page*10);\n    }\n  }\n}\n</script>\n\n<style>\n.el-col {\n  border-radius: 4px;\n}\n.bg-purple-dark {\n  background: #99a9bf;\n}\n.bg-purple {\n  background: #d3dce6;\n}\n.bg-purple-light {\n  background: #e5e9f2;\n}\n.grid-content {\n  border-radius: 4px;\n  min-height: 36px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}